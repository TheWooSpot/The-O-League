---
import Layout from '../layouts/Layout.astro';
import ConversationPlayer from '../components/ConversationPlayer.jsx';

const { topic } = Astro.url.searchParams;
const decodedTopic = topic ? decodeURIComponent(topic) : "AI Ethics";
---

<Layout title={decodedTopic}>
  <section class="py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div class="flex items-center mb-6">
          <a href="/topics" class="text-gray-400 hover:text-white mr-3 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
            </svg>
            Back to Topics
          </a>
          <h1 class="text-3xl font-display font-bold">{decodedTopic}</h1>
        </div>
        
        <div class="bg-dark-100/80 backdrop-blur-md border border-gray-800 rounded-xl p-6 mb-8">
          <ConversationPlayer client:load topic={decodedTopic} />
        </div>
        
        <div class="bg-dark-100/80 backdrop-blur-md border border-gray-800 rounded-xl p-6">
          <h2 class="text-xl font-display font-semibold mb-4">About This Discussion</h2>
          <p class="text-gray-300 mb-4">
            This is an AI-guided discussion on {decodedTopic}. Our two AI hosts, Alex and Morgan, are exploring different perspectives on this topic. You can listen to their conversation and join in at any time by clicking the "Raise Hand" button.
          </p>
          <p class="text-gray-300 mb-4">
            When you join, the hosts will acknowledge you and ask for your thoughts. The conversation will last approximately 7 minutes, during which you'll have several opportunities to contribute.
          </p>
          <h3 class="text-lg font-display font-semibold mb-2 mt-6">Explore More Topics</h3>
          <a href="/topics" class="inline-block px-5 py-2 bg-secondary-600 rounded-lg font-medium text-white hover:bg-secondary-700 transition-colors">
            Browse All Topics
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>
